<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.innovative.dao.DisassembleReportDao">
	<!-- 拆解报告信息 -->
	<resultMap type="DisassembleReport" id="DisassembleReportMap">
		<id property="id" column="id"/>
		<result property="title" column="title"/>
		<result property="file" column="file"/>
		<result property="create_date" column="create_date"/>
		<result property="create_by" column="create_by"/>
		<result property="late_date" column="late_date"/>
		<result property="late_by" column="late_by"/>
	</resultMap>

    <!--将拆解报告保存到服务器，并将记录保存到数据库-->
    <insert id="saveDisassembleReport" parameterType="DisassembleReport">
    	<selectKey resultType="int" keyProperty="id" order="AFTER">
			SELECT currval('xacx_disassemble_report_id_seq'::regclass)
		</selectKey>
        INSERT INTO "xacx_disassemble_report"
        (title ,file,create_date,create_by)
        VALUES
        (#{title},#{file},now(),#{create_by})
        
    </insert>
    
    <!-- 根据id查询拆解报告 -->
    <select id="getDisassembleReportById" parameterType="int" resultMap="DisassembleReportMap">
    	SELECT "id","title","file","create_date","create_by","late_date","late_by" FROM "xacx_disassemble_report" WHERE "id"=#{id}
    </select>
    
    <!--根据id删除拆解报告 -->
    <delete id="deleteDisassembleReportById" parameterType="int">
    	DELETE FROM "xacx_disassemble_report" WHERE "id"=#{id}
    </delete>
    
    <!--修改拆解报告 -->
    <update id="updateDisassembleReport" parameterType="DisassembleReport">
    	UPDATE "xacx_disassemble_report" SET "title"=#{title}
    	<where>
    		"id"=#{id}
    	</where>
    </update>

</mapper>